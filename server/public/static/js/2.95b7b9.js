(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{407:function(t,e,a){var r=a(436);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a(22).default)("e0f1380a",r,!0,{})},408:function(t,e,a){var r=a(438);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a(22).default)("04126cae",r,!0,{})},409:function(t,e,a){var r=a(440);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a(22).default)("7652b227",r,!0,{})},416:function(t,e,a){"use strict";var r=a(44),i=a.n(r),n={name:"CircleButton",props:{value:{type:Number,default:0}},data:function(){return{count:0}},computed:{variable:function(){return i.a}},watch:{value:function(t){this.count=t}},mounted:function(){this.count=this.value},methods:{decrease:function(){0!==this.count&&(this.count-=1,this.$emit("decrease"))},increase:function(t){this.count+=1,this.$emit("increase",t)}}},o=(a(435),a(0)),s=Object(o.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"circle-button"},[a("transition",{attrs:{name:"circle-button"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.count,expression:"count"}]},[a("elm-icon",{attrs:{name:"decrease",color:t.variable.themeColor,"font-size":44,"stop-propagation":!0},on:{click:t.decrease}})],1)]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.count,expression:"count"}],staticClass:"count"},[t._v(t._s(t.count))]),t._v(" "),a("elm-icon",{attrs:{name:"increase",color:t.variable.themeColor,"font-size":44,"stop-propagation":!0},on:{click:t.increase}})],1)}),[],!1,null,"9e902d2e",null);e.a=s.exports},430:function(t,e,a){t.exports=a(431)},431:function(t,e,a){var r=a(432);t.exports=r},432:function(t,e,a){a(433);var r=a(18);t.exports=r.parseFloat},433:function(t,e,a){var r=a(4),i=a(434);r({global:!0,forced:parseFloat!=i},{parseFloat:i})},434:function(t,e,a){var r=a(19),i=a(135).trim,n=a(111),o=r.parseFloat,s=1/o(n+"-0")!=-1/0;t.exports=s?function(t){var e=i(String(t)),a=o(e);return 0===a&&"-"==e.charAt(0)?-0:a}:o},435:function(t,e,a){"use strict";var r=a(407);a.n(r).a},436:function(t,e,a){(e=a(21)(!1)).push([t.i,"[data-v-9e902d2e]:export{baseFontSize:75;headerHeight:84;themeColor:#008cff;primaryTextColor:#222}.circle-button[data-v-9e902d2e]{display:flex;align-items:center}.elm-icon[data-v-9e902d2e]{width:.58667rem;height:.58667rem}.count[data-v-9e902d2e]{overflow:hidden;width:.8rem;color:#222;font-size:.37333rem;text-align:center}.circle-button-enter[data-v-9e902d2e],.circle-button-leave-to[data-v-9e902d2e]{opacity:0}.circle-button-enter[data-v-9e902d2e]{transform:translateX(1.38667rem) rotate(0deg)}.circle-button-enter-to[data-v-9e902d2e],.circle-button-leave[data-v-9e902d2e]{transform:translateX(0) rotate(-1turn)}.circle-button-leave-to[data-v-9e902d2e]{transform:translateX(.58667rem) rotate(0deg)}.circle-button-enter-active[data-v-9e902d2e],.circle-button-leave-active[data-v-9e902d2e]{transition:all .2s ease}",""]),t.exports=e},437:function(t,e,a){"use strict";var r=a(408);a.n(r).a},438:function(t,e,a){(e=a(21)(!1)).push([t.i,'[data-v-112b8cfa]:export{baseFontSize:75;headerHeight:84;themeColor:#008cff;primaryTextColor:#222}.food-drawer-mask[data-v-112b8cfa]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:-1;background-color:rgba(0,0,0,.3)}.food-drawer-container[data-v-112b8cfa]{position:absolute;bottom:0;display:flex;flex-direction:column;width:100%;max-height:70%;background-color:#fff;transition:transform .2s linear}.header[data-v-112b8cfa]{display:flex;justify-content:space-between;align-items:center;padding:.4rem;background-color:#fafafa}.header .title[data-v-112b8cfa]{color:#222;font-size:.37333rem}.header .clear[data-v-112b8cfa]{color:#999;font-size:.37333rem}.scroll-wrapper[data-v-112b8cfa]{overflow:hidden;flex:1}.food-list[data-v-112b8cfa]{padding:0 .4rem}.food-list .food-item[data-v-112b8cfa]{display:flex;align-items:center;height:1.6rem;padding:.26667rem 0}.food-list img[data-v-112b8cfa]{width:1.6rem;height:1.6rem;margin-right:.26667rem;border-radius:.10667rem}.food-list .content[data-v-112b8cfa]{position:relative;display:flex;flex:1;flex-direction:column;justify-content:space-between;height:100%}.food-list .food-name[data-v-112b8cfa]{color:#222;font-size:.37333rem;font-weight:700}.food-list .price[data-v-112b8cfa]{margin-right:.10667rem;color:#ff4b33;font-size:.48rem;font-weight:700}.food-list .price[data-v-112b8cfa]:before{content:"¥";margin-right:.05333rem;color:#ff4b33;font-size:.32rem}.drawer-enter[data-v-112b8cfa],.drawer-leave-to[data-v-112b8cfa]{opacity:0}.drawer-enter .food-drawer-container[data-v-112b8cfa],.drawer-leave-to .food-drawer-container[data-v-112b8cfa]{transform:translateY(100%)}.drawer-enter-active[data-v-112b8cfa],.drawer-leave-active[data-v-112b8cfa]{transition:opacity .2s linear}',""]),t.exports=e},439:function(t,e,a){"use strict";var r=a(409);a.n(r).a},440:function(t,e,a){(e=a(21)(!1)).push([t.i,'[data-v-005f3f4d]:export{baseFontSize:75;headerHeight:84;themeColor:#008cff;primaryTextColor:#222}.shop-car-container[data-v-005f3f4d]{position:fixed;right:0;bottom:0;left:0;z-index:999;height:1.28rem}.shop-car[data-v-005f3f4d]{box-sizing:border-box;width:100%;height:100%;padding:0 .4rem;background-color:rgba(61,61,63,.9)}.car[data-v-005f3f4d],.shop-car[data-v-005f3f4d]{display:flex;align-items:center}.car[data-v-005f3f4d]{position:relative;transform:translateY(-.26667rem);justify-content:center;width:1.2rem;height:1.2rem;margin-right:.4rem;border:.13333rem solid rgba(61,61,63,.9);background-color:#333;border-radius:50%}.car.active[data-v-005f3f4d]{background-color:#008cff}.car .elm-badge[data-v-005f3f4d]{position:absolute;top:-.10667rem;right:-.05333rem}.content[data-v-005f3f4d]{flex:1}.tip[data-v-005f3f4d]{margin-bottom:.10667rem;color:#999;font-size:.37333rem;font-weight:700}.delivery-fee[data-v-005f3f4d]{color:#999;font-size:.32rem}.btn[data-v-005f3f4d]{width:2.4rem;height:.90667rem;color:#fff;font-size:.37333rem;font-weight:700;line-height:.90667rem;text-align:center;background-color:#999;border-radius:.48rem}.btn.active[data-v-005f3f4d]{background-color:#008cff}.price[data-v-005f3f4d]{margin-right:.10667rem;color:#fff;font-size:.56rem;font-weight:700}.price[data-v-005f3f4d]:before{content:"¥";margin-right:.05333rem;color:#fff;font-size:.32rem}.origin-price[data-v-005f3f4d]{position:relative;color:#999;font-size:.32rem}.origin-price[data-v-005f3f4d]:before{content:"¥";margin-right:.05333rem;color:#999;font-size:.32rem}.origin-price[data-v-005f3f4d]:after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:120%;height:.02667rem;background-color:#999}',""]),t.exports=e},447:function(t,e,a){var r=a(495);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a(22).default)("441e6504",r,!0,{})},448:function(t,e,a){var r=a(497);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a(22).default)("00d5786b",r,!0,{})},449:function(t,e,a){var r=a(499);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a(22).default)("541b176e",r,!0,{})},450:function(t,e,a){var r=a(501);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a(22).default)("2061bc00",r,!0,{})},456:function(t,e,a){"use strict";var r=a(12),i=a.n(r),n=a(17),o=a.n(n),s=a(7),c=a.n(s),l=a(1),f=a.n(l),u=a(6),d=a.n(u),h=a(5),m=a.n(h),p=a(8),v=a.n(p),g=a(10),b=a.n(g),x=a(430),w=a.n(x),C=a(82),y=a.n(C),_=a(2),z=a.n(_),H=a(9),$=a(27),k=a(61);function O(t,e){var a=b()(t);if(v.a){var r=v()(t);e&&(r=m()(r).call(r,(function(e){return d()(t,e).enumerable}))),a.push.apply(a,r)}return a}function T(t){for(var e=1;e<arguments.length;e++){var a,r=null!=arguments[e]?arguments[e]:{};if(e%2)f()(a=O(Object(r),!0)).call(a,(function(e){z()(t,e,r[e])}));else if(c.a)o()(t,c()(r));else{var n;f()(n=O(Object(r))).call(n,(function(e){i()(t,e,d()(r,e))}))}}return t}var j={name:"FoodDrawer",components:{CircleButton:a(416).a,ScrollView:k.a},props:{paddingBottom:{type:Number,default:0},visible:{type:Boolean,default:!1}},data:function(){return{dialog:!1}},computed:T({},Object(H.mapState)("shop",{shopCar:function(t){return t.restaurant.shopCar}})),watch:{visible:function(t){t&&this.$refs.scroll.reset()}},methods:T({close:function(){this.$emit("toggle")},decrease:function(t){this[$.c](t),this.$refs.scroll.reset()},increase:function(t,e){this[$.e](t)},toggle:function(){this.dialog=!this.dialog},clear:function(){this.dialog=!1,this[$.a](),this.close()}},Object(H.mapMutations)("shop",[$.e,$.c,$.a]))},F=(a(437),a(0));function E(t,e){var a=b()(t);if(v.a){var r=v()(t);e&&(r=m()(r).call(r,(function(e){return d()(t,e).enumerable}))),a.push.apply(a,r)}return a}var S={name:"ShopCar",components:{Drawer:Object(F.a)(j,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("transition",{attrs:{name:"drawer",appear:""}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"food-drawer-mask",on:{click:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.close(e))}}},[a("div",{staticClass:"food-drawer-container"},[a("header",{staticClass:"header"},[a("span",{staticClass:"title"},[t._v("已选商品")]),t._v(" "),a("div",{on:{click:function(e){return e.stopPropagation(),t.toggle(e)}}},[a("elm-icon",{attrs:{name:"trash",color:"#999","font-size":28}}),t._v(" "),a("span",{staticClass:"clear"},[t._v("清空")])],1)]),t._v(" "),a("div",{staticClass:"scroll-wrapper"},[a("scroll-view",{ref:"scroll"},[a("ul",{staticClass:"food-list",style:{paddingBottom:t.paddingBottom+"px"}},t._l(t.shopCar,(function(e){return a("li",{key:e.id,staticClass:"food-item"},[a("img",{attrs:{src:e.imagePath,alt:"food"}}),t._v(" "),a("div",{staticClass:"content"},[a("p",{staticClass:"food-name"},[t._v(t._s(e.name))]),t._v(" "),a("span",{staticClass:"price"},[t._v(t._s(e.price))]),t._v(" "),a("circle-button",{style:{position:"absolute",right:0,bottom:0,zIndex:999},attrs:{value:e.count},on:{decrease:function(a){return t.decrease(e)},increase:function(a){return t.increase(e)}}})],1)])})),0)])],1)])])]),t._v(" "),t.dialog?a("elm-dialog",{attrs:{title:"清空购物车"},on:{cancel:t.toggle,ensure:t.clear}}):t._e()],1)}),[],!1,null,"112b8cfa",null).exports},data:function(){return{visible:!1,shopCarHeight:0}},computed:function(t){for(var e=1;e<arguments.length;e++){var a,r=null!=arguments[e]?arguments[e]:{};if(e%2)f()(a=E(Object(r),!0)).call(a,(function(e){z()(t,e,r[e])}));else if(c.a)o()(t,c()(r));else{var n;f()(n=E(Object(r))).call(n,(function(e){i()(t,e,d()(r,e))}))}}return t}({price:function(){var t;return y()(t=this.shopCar).call(t,(function(t,e){return t+w()(e.price)*e.count}),0).toFixed(2)},originPrice:function(){var t;return y()(t=this.shopCar).call(t,(function(t,e){return t+w()(e.originPrice)*e.count}),0).toFixed(2)},desc:function(){return this.shopCar.length?this.price>=this.restaurant.floatMinimumOrderAmount?"去结算":"还差".concat((this.restaurant.floatMinimumOrderAmount-this.price).toFixed(2),"起送"):"¥".concat(this.restaurant.floatMinimumOrderAmount,"起送")},count:function(){var t;return y()(t=this.shopCar).call(t,(function(t,e){return t+e.count}),0)}},Object(H.mapState)("shop",{restaurant:function(t){return t.restaurant},shopCar:function(t){return t.restaurant.shopCar}})),mounted:function(){this.shopCarHeight=this.$refs["shop-car"].offsetHeight},methods:{to:function(){return this.$refs.car.$el},pay:function(){this.price<this.restaurant.floatMinimumOrderAmount||this.$notify({type:"primary",message:"功能正在开发中"})},open:function(){this.shopCar.length&&(this.visible=!0)},close:function(){this.visible=!1}}},B=(a(439),Object(F.a)(S,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shop-car-container"},[a("drawer",{attrs:{visible:t.visible,"padding-bottom":t.shopCarHeight},on:{toggle:t.close}}),t._v(" "),a("div",{ref:"shop-car",staticClass:"shop-car",on:{click:function(e){return e.stopPropagation(),t.open(e)}}},[a("div",{staticClass:"car",class:t.shopCar.length?"active":""},[a("elm-icon",{ref:"car",attrs:{name:"car",color:t.shopCar.length?"#fff":"#999","font-size":46}}),t._v(" "),a("elm-badge",{directives:[{name:"show",rawName:"v-show",value:t.count,expression:"count"}],attrs:{value:t.count}})],1),t._v(" "),a("div",{staticClass:"content"},[t.shopCar.length?a("p",[a("span",{staticClass:"price"},[t._v(t._s(t.price))]),t._v(" "),a("span",{staticClass:"origin-price"},[t._v(t._s(t.originPrice))])]):a("p",{staticClass:"tip"},[t._v("未选购商品")]),t._v(" "),a("p",{staticClass:"delivery-fee"},[t._v(t._s(t.restaurant.floatDeliveryFee?"另需配送费¥"+t.restaurant.floatDeliveryFee:"免费配送"))])]),t._v(" "),a("div",{staticClass:"btn",class:t.price>=t.restaurant.floatMinimumOrderAmount?"active":"",on:{click:function(e){return e.stopPropagation(),t.pay(e)}}},[t._v(t._s(t.desc))])])],1)}),[],!1,null,"005f3f4d",null));e.a=B.exports},494:function(t,e,a){"use strict";var r=a(447);a.n(r).a},495:function(t,e,a){(e=a(21)(!1)).push([t.i,'[data-v-6f447822]:export{baseFontSize:75;headerHeight:84;themeColor:#008cff;primaryTextColor:#222}.food-list-container[data-v-6f447822]{padding-left:2.13333rem}.title[data-v-6f447822]{padding:.26667rem .4rem .26667rem .26667rem;color:#222;font-size:.37333rem}.food-list[data-v-6f447822]{padding:0 .4rem 0 .26667rem}.food-item[data-v-6f447822]{position:relative;display:flex;padding-bottom:.26667rem}.food-item img[data-v-6f447822]{width:2.4rem;height:2.4rem;margin-right:.26667rem;border-radius:.16rem}.food-item .content[data-v-6f447822]{position:relative;overflow:hidden;flex:1}.food-item .name[data-v-6f447822]{margin-bottom:.10667rem;color:#222;font-size:.42667rem;font-weight:700;line-height:.56rem}.food-item .desc[data-v-6f447822]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:.50667rem}.food-item .desc[data-v-6f447822],.food-item .extra[data-v-6f447822]{margin-bottom:.10667rem;color:#999;font-size:.32rem}.food-item .extra .sell[data-v-6f447822]{margin-right:.16rem}.food-item .tag[data-v-6f447822]{margin-bottom:.10667rem;line-height:.56rem}.food-item .price[data-v-6f447822]{margin-right:.10667rem;color:#ff4b33;font-size:.48rem;font-weight:700}.food-item .price[data-v-6f447822]:before{content:"¥";margin-right:.05333rem;color:#ff4b33;font-size:.32rem}.food-item .origin-price[data-v-6f447822]{position:relative;color:#999;font-size:.32rem}.food-item .origin-price[data-v-6f447822]:before{content:"¥";margin-right:.05333rem;color:#999;font-size:.32rem}.food-item .origin-price[data-v-6f447822]:after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:120%;height:.02667rem;background-color:#999}.elm-tag[data-v-6f447822]{padding:0 .10667rem;border-color:#ffc9c1}.circle-button[data-v-6f447822]{position:absolute;right:0;bottom:0;z-index:999}',""]),t.exports=e},496:function(t,e,a){"use strict";var r=a(448);a.n(r).a},497:function(t,e,a){(e=a(21)(!1)).push([t.i,"[data-v-14a57110]:export{baseFontSize:75;headerHeight:84;themeColor:#008cff;primaryTextColor:#222}.menu-container[data-v-14a57110]{background-color:#fafafa}.scroll-wrapper[data-v-14a57110]{overflow:hidden;width:2.13333rem}.menu-item[data-v-14a57110]{position:relative;padding:.4rem;color:#999;font-size:.32rem;line-height:.48rem;text-align:center}.menu-item.active[data-v-14a57110]{background-color:#fff}.menu-item .icon[data-v-14a57110]{width:.32rem;height:.32rem}.menu-item .name[data-v-14a57110]{vertical-align:text-bottom}.menu-item .elm-badge[data-v-14a57110]{position:absolute;top:.13333rem;right:.13333rem}",""]),t.exports=e},498:function(t,e,a){"use strict";var r=a(449);a.n(r).a},499:function(t,e,a){(e=a(21)(!1)).push([t.i,"[data-v-00d63ab4]:export{baseFontSize:75;headerHeight:84;themeColor:#008cff;primaryTextColor:#222}.ball-list[data-v-00d63ab4]{position:fixed;top:0;left:0;z-index:999;width:.42667rem;height:.42667rem}.ball-list .ball-container[data-v-00d63ab4]{position:absolute}.ball-list .ball[data-v-00d63ab4]{width:.42667rem;height:.42667rem;background-color:#008cff;transition:transform .4s linear;border-radius:50%}.ball-list .ball-enter-active[data-v-00d63ab4]{transition:transform .4s cubic-bezier(.49,-.29,.75,.41)}",""]),t.exports=e},500:function(t,e,a){"use strict";var r=a(450);a.n(r).a},501:function(t,e,a){(e=a(21)(!1)).push([t.i,"[data-v-1af4851a]:export{baseFontSize:75;headerHeight:84;themeColor:#008cff;primaryTextColor:#222}.title[data-v-1af4851a]{position:fixed;right:0;left:0;z-index:99;padding:.26667rem .4rem .26667rem 2.4rem;color:#222;font-size:.37333rem;background-color:#fff;will-change:transform}",""]),t.exports=e},510:function(t,e,a){"use strict";a.r(e);var r=a(12),i=a.n(r),n=a(17),o=a.n(n),s=a(7),c=a.n(s),l=a(1),f=a.n(l),u=a(6),d=a.n(u),h=a(5),m=a.n(h),p=a(8),v=a.n(p),g=a(10),b=a.n(g),x=a(2),w=a.n(x),C=a(13),y=a.n(C),_=a(9),z=a(33),H=a(50),$=a(131),k=a(24),O=a(80),T=a(11),j=a(38),F=a(456),E=a(455),S=a(37),B=a.n(S),Y=a(82),N=a.n(Y),P=a(27);function M(t,e){var a=b()(t);if(v.a){var r=v()(t);e&&(r=m()(r).call(r,(function(e){return d()(t,e).enumerable}))),a.push.apply(a,r)}return a}function D(t){for(var e=1;e<arguments.length;e++){var a,r=null!=arguments[e]?arguments[e]:{};if(e%2)f()(a=M(Object(r),!0)).call(a,(function(e){w()(t,e,r[e])}));else if(c.a)o()(t,c()(r));else{var n;f()(n=M(Object(r))).call(n,(function(e){i()(t,e,d()(r,e))}))}}return t}var X={name:"FoodList",components:{CircleButton:a(416).a},props:{paddingBottom:{type:Number,default:0}},data:function(){return{offsetTops:[],height:0}},computed:D({},Object(_.mapState)("shop",{restaurant:function(t){return t.restaurant}})),watch:{restaurant:function(){var t=this;this.$nextTick((function(){t.init()}))}},mounted:function(){this.init()},methods:D({init:function(){var t;this.height=this.$refs.title[0].offsetHeight,this.offsetTops=N()(t=this.$refs.title).call(t,(function(t,e){return t.push(e.offsetTop),t}),[])},scroll:function(t,e){var a,r=B()(a=this.offsetTops).call(a,(function(e){return e>t}));if(0!==r){if(-1===r)return e({index:this.offsetTops.length-1,translateY:0});var i=this.offsetTops[r]-(t+this.height);e({index:r-1,translateY:i>=0?0:i})}},getElement:function(t){return this.$refs.title[t]},jump:function(t){this[P.g](t),this.$router.push("/food/".concat(t.id))},decrease:function(t){this[P.c](t)},increase:function(t,e){this[P.e](t),this.$emit("increase",e.target)}},Object(_.mapMutations)("shop",[P.g,P.e,P.c]))},q=(a(494),a(0)),A=Object(q.a)(X,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"food-list-container",style:{paddingBottom:t.paddingBottom+"px"}},t._l(t.restaurant.menu,(function(e){return a("li",{key:e.id},[a("p",{ref:"title",refInFor:!0,staticClass:"title"},[t._v(t._s(e.name))]),t._v(" "),a("ul",{staticClass:"food-list"},t._l(e.foods,(function(e,r){return a("li",{key:r,staticClass:"food-item",on:{click:function(a){return a.stopPropagation(),t.jump(e)}}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imagePath,expression:"food.imagePath"}],attrs:{alt:"food"}}),t._v(" "),a("div",{staticClass:"content"},[a("p",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),e.description?a("p",{staticClass:"desc"},[t._v(t._s(e.description))]):t._e(),t._v(" "),a("div",{staticClass:"extra"},[a("span",{staticClass:"sell"},[t._v("月售"+t._s(e.sell))]),t._v(" "),a("span",{staticClass:"rating"},[t._v("好评率"+t._s(e.rating)+"%")])]),t._v(" "),a("div",{staticClass:"tag"},[a("elm-tag",{attrs:{color:"#eb6551"}},[t._v(t._s(e.discountRate)+"折")])],1),t._v(" "),a("div",[a("span",{staticClass:"price"},[t._v(t._s(e.price))]),t._v(" "),a("span",{staticClass:"origin-price"},[t._v(t._s(e.originPrice))])]),t._v(" "),a("circle-button",{attrs:{value:e.count},on:{decrease:function(a){return t.decrease(e)},increase:function(a){return t.increase(e,a)}}})],1)])})),0)])})),0)}),[],!1,null,"6f447822",null).exports;function L(t,e){var a=b()(t);if(v.a){var r=v()(t);e&&(r=m()(r).call(r,(function(e){return d()(t,e).enumerable}))),a.push.apply(a,r)}return a}var R={name:"ElmMenu",components:{ScrollView:a(61).a},props:{height:{type:Number,required:!0},paddingBottom:{type:Number,default:0}},data:function(){return{active:0}},computed:function(t){for(var e=1;e<arguments.length;e++){var a,r=null!=arguments[e]?arguments[e]:{};if(e%2)f()(a=L(Object(r),!0)).call(a,(function(e){w()(t,e,r[e])}));else if(c.a)o()(t,c()(r));else{var n;f()(n=L(Object(r))).call(n,(function(e){i()(t,e,d()(r,e))}))}}return t}({},Object(_.mapState)("shop",{restaurant:function(t){return t.restaurant}})),watch:{height:function(){this.$refs.scroll.reset()}},methods:{select:function(t){this.active=t,this.$emit("select",t)},scrollToElement:function(t){t!==this.active&&(this.active=t,this.$refs.scroll.scrollToElement(this.$refs.menu[t]))}}},I=(a(496),Object(q.a)(R,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu-container"},[a("div",{staticClass:"scroll-wrapper",style:{height:t.height+"px"}},[a("scroll-view",{ref:"scroll",attrs:{"stop-propagation":!0}},[a("ul",{staticClass:"menu-list",style:{paddingBottom:t.paddingBottom+"px"}},t._l(t.restaurant.menu,(function(e,r){return a("li",{key:e.id,ref:"menu",refInFor:!0,staticClass:"menu-item",class:t.active===r?"active":"",on:{click:function(e){return e.stopPropagation(),t.select(r)}}},[e.iconUrl?a("img",{staticClass:"icon",attrs:{src:e.iconUrl,alt:"icon"}}):t._e(),t._v(" "),a("span",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),a("elm-badge",{directives:[{name:"show",rawName:"v-show",value:e.count,expression:"menu.count"}],attrs:{value:e.count}})],1)})),0)])],1)])}),[],!1,null,"14a57110",null).exports),J={name:"Ball",data:function(){return{count:10,queue:[],index:-1}},methods:{run:function(t,e){var a=this.$refs.ball,r=a.offsetWidth,i=a.offsetHeight,n=t.getBoundingClientRect(),o=e.getBoundingClientRect();this.x=(o.x+(o.width-r)/2).toFixed(2),this.y=(o.y+(o.height-i)/2).toFixed(2),this.translateX=(n.x+(n.width-r)/2-this.x).toFixed(2),this.translateY=(n.y+(n.height-i)/2-this.y).toFixed(2),this.index=(this.index+1)%this.count,this.queue.push(this.index)},beforeEnter:function(t){t.style.left="".concat(this.x,"px"),t.style.top="".concat(this.y,"px")},enter:function(t){t.offsetTop,t.style.transform="translateY(".concat(this.translateY,"px)"),t.children[0].style.transform="translateX(".concat(this.translateX,"px)")},afterEnter:function(t){t.style.left="0px",t.style.top="0px",t.style.transform="translateY(0px)",t.children[0].style.transform="translateX(0px)",this.queue.shift()}}},U=(a(498),Object(q.a)(J,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{ref:"ball",staticClass:"ball-list"},t._l(t.count,(function(e){return a("transition",{key:e,attrs:{name:"ball"},on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter}},[a("li",{directives:[{name:"show",rawName:"v-show",value:t.queue.includes(e-1),expression:"queue.includes(item - 1)"}],staticClass:"ball-container"},[a("div",{staticClass:"ball"})])])})),1)}),[],!1,null,"00d63ab4",null).exports);function V(t,e){var a=b()(t);if(v.a){var r=v()(t);e&&(r=m()(r).call(r,(function(e){return d()(t,e).enumerable}))),a.push.apply(a,r)}return a}function W(t){for(var e=1;e<arguments.length;e++){var a,r=null!=arguments[e]?arguments[e]:{};if(e%2)f()(a=V(Object(r),!0)).call(a,(function(e){w()(t,e,r[e])}));else if(c.a)o()(t,c()(r));else{var n;f()(n=V(Object(r))).call(n,(function(e){i()(t,e,d()(r,e))}))}}return t}var G={name:"Order",title:"饿了么商家商品详情",meta:{keyword:"elm, shop",description:"哦，上帝，相信你会爱上这个的"},components:{Common:E.a,FoodList:A,ElmMenu:I,ShopCar:F.a,Ball:U},mixins:[$.a],beforeRouteLeave:function(t,e,a){var r=j.a.home,i=j.a.food,n=j.a.kind,o=j.a.shopSearch,s=j.a.shopComment;switch(t.name){case r.name:case n.name:case o.name:this[z.b](k.f.slideRight);break;case i.name:e.meta.scrollHeight=this.scroller.getCurrent().y,this[z.b](k.f.slideLeft);break;case s.name:this[z.b]("")}a()},beforeRouteEnter:function(t,e,a){a((function(a){if(a.scroller){var r=j.a.food,i=t.meta.scrollHeight;switch(e.name){case r.name:a.scroller.scrollTo({y:i}),a.$refs.common.scroll({y:i}),a.scroll({y:i})}}}))},asyncData:function(t){var e,a=t.store,r=t.route;return a.dispatch(y()(e="".concat(O.a.shop,"/")).call(e,H.b),r.params.id)},data:function(){return{title:!1,foodDrawer:!1,shopCarHeight:0,menuHeight:0,menuTop:0,translateY:0,headerHeight:0,navHeight:0,height:0,scroller:null}},computed:W({},Object(_.mapState)("shop",{restaurant:function(t){return t.restaurant}})),watch:{restaurant:function(){var t=this;this.$nextTick((function(){t.init()}))}},beforeDestroy:function(){window.removeEventListener("resize",this.resize,!1)},mounted:function(){this.restaurant&&this.$route.params.id===this.restaurant.id&&this.init()},methods:W({init:function(){var t=this,e=this.$refs.common.rect(),a=e.headerHeight,r=e.navHeight,i=e.navOffsetTop,n=e.menuTop;this.headerHeight=a,this.navHeight=r,this.navOffsetTop=i,this.menuTop=n,this.height=this.menuHeight=document.body.offsetHeight-this.menuTop,this.$refs.title.style.top="".concat(this.headerHeight+this.navHeight,"px"),this.scroller=this.$refs.common.getScroll(),this.shopCarHeight=this.$refs["shop-car"].$el.offsetHeight,this.$refs.common.reset(),this.scroller.on("scroll",this.scroll),this.resize=Object(T.b)((function(){t.height=document.body.offsetHeight-t.menuTop,t.menuHeight=t.height-t.translateY}),!1),window.addEventListener("resize",this.resize,!1)},scroll:function(t){var e=this,a=t.y;a=Math.ceil(a);var r=this.menuTop-this.headerHeight-this.navHeight;this.title=-a+this.headerHeight>=this.navOffsetTop;var i=-a+this.headerHeight+this.navHeight>=this.menuTop;this.translateY=i?-r:a,this.menuHeight=i?this.height+r:-a+this.height,this.$refs.food.scroll(-a+this.headerHeight+this.navHeight,(function(t){var a=t.index,r=t.translateY;e.$refs.title.textContent=e.restaurant.menu[a].name,e.$refs.title.style.transform="translateY(".concat(r,"px)"),e.$refs.menu.scrollToElement(a)}))},increase:function(t){var e=this.$refs["shop-car"].to();this.$refs.ball.run(e,t)},select:function(t){var e=-(this.$refs.food.getElement(t).offsetTop-this.headerHeight-this.navHeight);this.scroller.scrollTo({y:e}),this.$refs.common.scroll({y:e}),this.scroll({y:e})},toggle:function(){this.foodDrawer=!this.foodDrawer}},Object(_.mapMutations)("global",[z.b]))},K=(a(500),Object(q.a)(G,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("common",{ref:"common",scopedSlots:t._u([{key:"extra",fn:function(){return[a("p",{directives:[{name:"show",rawName:"v-show",value:t.title,expression:"title"}],ref:"title",staticClass:"title"},[t._v("优惠")]),t._v(" "),t.restaurant?a("elm-menu",{ref:"menu",style:{position:"fixed",top:t.menuTop+"px",left:0,zIndex:999,transform:"translateY("+t.translateY+"px)",willChange:"transform"},attrs:{height:t.menuHeight,"padding-bottom":t.shopCarHeight},on:{select:t.select}}):t._e(),t._v(" "),t.restaurant?a("shop-car",{ref:"shop-car"}):t._e(),t._v(" "),a("ball",{ref:"ball"})]},proxy:!0}])},[a("food-list",{ref:"food",attrs:{"padding-bottom":t.shopCarHeight},on:{increase:t.increase}})],1)}),[],!1,null,"1af4851a",null));e.default=K.exports}}]);
//# sourceMappingURL=2.95b7b9.js.map