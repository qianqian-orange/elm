(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{377:function(t,e,n){},378:function(t,e,n){},379:function(t,e,n){},385:function(t,e,n){"use strict";var a=n(39),o=n.n(a),s={name:"CircleButton",props:{value:{type:Number,default:0}},data:function(){return{count:0}},computed:{variable:function(){return o.a}},watch:{value:function(t){this.count=t}},mounted:function(){this.count=this.value},methods:{decrease:function(){0!==this.count&&(this.count-=1,this.$emit("decrease"))},increase:function(t){this.count+=1,this.$emit("increase",t)}}},i=(n(403),n(0)),r=Object(i.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"circle-button"},[n("transition",{attrs:{name:"circle-button"}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.count,expression:"count"}]},[n("elm-icon",{attrs:{name:"decrease",color:t.variable.themeColor,"font-size":44,"stop-propagation":!0},on:{click:t.decrease}})],1)]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.count,expression:"count"}],staticClass:"count"},[t._v(t._s(t.count))]),t._v(" "),n("elm-icon",{attrs:{name:"increase",color:t.variable.themeColor,"font-size":44,"stop-propagation":!0},on:{click:t.increase}})],1)}),[],!1,null,"9e902d2e",null);e.a=r.exports},398:function(t,e,n){t.exports=n(399)},399:function(t,e,n){var a=n(400);t.exports=a},400:function(t,e,n){n(401);var a=n(8);t.exports=a.parseFloat},401:function(t,e,n){var a=n(2),o=n(402);a({global:!0,forced:parseFloat!=o},{parseFloat:o})},402:function(t,e,n){var a=n(10),o=n(180).trim,s=n(130),i=a.parseFloat,r=1/i(s+"-0")!=-1/0;t.exports=r?function(t){var e=o(String(t)),n=i(e);return 0===n&&"-"==e.charAt(0)?-0:n}:i},403:function(t,e,n){"use strict";var a=n(377);n.n(a).a},404:function(t,e,n){"use strict";var a=n(378);n.n(a).a},405:function(t,e,n){"use strict";var a=n(379);n.n(a).a},416:function(t,e,n){},421:function(t,e,n){"use strict";var a=n(18),o=n.n(a),s=n(31),i=n.n(s),r=n(13),c=n.n(r),l=n(3),u=n.n(l),f=n(9),p=n.n(f),v=n(4),d=n.n(v),h=n(14),m=n.n(h),_=n(17),g=n.n(_),C=n(398),b=n.n(C),w=n(129),y=n.n(w),x=n(5),O=n.n(x),$=n(15),j=n(29),k=n(56);function B(t,e){var n=g()(t);if(m.a){var a=m()(t);e&&(a=d()(a).call(a,(function(e){return p()(t,e).enumerable}))),n.push.apply(n,a)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n,a=null!=arguments[e]?arguments[e]:{};if(e%2)u()(n=B(Object(a),!0)).call(n,(function(e){O()(t,e,a[e])}));else if(c.a)i()(t,c()(a));else{var s;u()(s=B(Object(a))).call(s,(function(e){o()(t,e,p()(a,e))}))}}return t}var P={name:"FoodDrawer",components:{CircleButton:n(385).a,ScrollView:k.a},props:{paddingBottom:{type:Number,default:0},visible:{type:Boolean,default:!1}},data:function(){return{dialog:!1}},computed:F({},Object($.mapState)("shop",{shopCar:function(t){return t.restaurant.shopCar}})),watch:{visible:function(t){t&&this.$refs.scroll.reset()}},methods:F({close:function(){this.$emit("toggle")},decrease:function(t){this[j.c](t),this.$refs.scroll.reset()},increase:function(t,e){this[j.d](t)},toggle:function(){this.dialog=!this.dialog},clear:function(){this.dialog=!1,this[j.a](),this.close()}},Object($.mapMutations)("shop",[j.d,j.c,j.a]))},S=(n(404),n(0));function M(t,e){var n=g()(t);if(m.a){var a=m()(t);e&&(a=d()(a).call(a,(function(e){return p()(t,e).enumerable}))),n.push.apply(n,a)}return n}var z={name:"ShopCar",components:{Drawer:Object(S.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition",{attrs:{name:"drawer",appear:""}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"food-drawer-mask",on:{click:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.close(e))}}},[n("div",{staticClass:"food-drawer-container"},[n("header",{staticClass:"header"},[n("span",{staticClass:"title"},[t._v("已选商品")]),t._v(" "),n("div",{on:{click:function(e){return e.stopPropagation(),t.toggle(e)}}},[n("elm-icon",{attrs:{name:"trash",color:"#999","font-size":28}}),t._v(" "),n("span",{staticClass:"clear"},[t._v("清空")])],1)]),t._v(" "),n("div",{staticClass:"scroll-wrapper"},[n("scroll-view",{ref:"scroll"},[n("ul",{staticClass:"food-list",style:{paddingBottom:t.paddingBottom+"px"}},t._l(t.shopCar,(function(e){return n("li",{key:e.id,staticClass:"food-item"},[n("img",{attrs:{src:e.imagePath,alt:"food"}}),t._v(" "),n("div",{staticClass:"content"},[n("p",{staticClass:"food-name"},[t._v(t._s(e.name))]),t._v(" "),n("span",{staticClass:"price"},[t._v(t._s(e.price))]),t._v(" "),n("circle-button",{style:{position:"absolute",right:0,bottom:0,zIndex:999},attrs:{value:e.count},on:{decrease:function(n){return t.decrease(e)},increase:function(n){return t.increase(e)}}})],1)])})),0)])],1)])])]),t._v(" "),t.dialog?n("elm-dialog",{attrs:{title:"清空购物车"},on:{cancel:t.toggle,ensure:t.clear}}):t._e()],1)}),[],!1,null,"112b8cfa",null).exports},data:function(){return{visible:!1,shopCarHeight:0}},computed:function(t){for(var e=1;e<arguments.length;e++){var n,a=null!=arguments[e]?arguments[e]:{};if(e%2)u()(n=M(Object(a),!0)).call(n,(function(e){O()(t,e,a[e])}));else if(c.a)i()(t,c()(a));else{var s;u()(s=M(Object(a))).call(s,(function(e){o()(t,e,p()(a,e))}))}}return t}({price:function(){var t;return y()(t=this.shopCar).call(t,(function(t,e){return t+b()(e.price)*e.count}),0).toFixed(2)},originPrice:function(){var t;return y()(t=this.shopCar).call(t,(function(t,e){return t+b()(e.originPrice)*e.count}),0).toFixed(2)},desc:function(){return this.shopCar.length?this.price>=this.restaurant.floatMinimumOrderAmount?"去结算":"还差".concat((this.restaurant.floatMinimumOrderAmount-this.price).toFixed(2),"起送"):"¥".concat(this.restaurant.floatMinimumOrderAmount,"起送")},count:function(){var t;return y()(t=this.shopCar).call(t,(function(t,e){return t+e.count}),0)}},Object($.mapState)("shop",{restaurant:function(t){return t.restaurant},shopCar:function(t){return t.restaurant.shopCar}})),mounted:function(){this.shopCarHeight=this.$refs["shop-car"].offsetHeight},methods:{to:function(){return this.$refs.car.$el},pay:function(){this.price<this.restaurant.floatMinimumOrderAmount||this.$notify({type:"primary",message:"功能正在开发中"})},open:function(){this.shopCar.length&&(this.visible=!0)},close:function(){this.visible=!1}}},A=(n(405),Object(S.a)(z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shop-car-container"},[n("drawer",{attrs:{visible:t.visible,"padding-bottom":t.shopCarHeight},on:{toggle:t.close}}),t._v(" "),n("div",{ref:"shop-car",staticClass:"shop-car",on:{click:function(e){return e.stopPropagation(),t.open(e)}}},[n("div",{staticClass:"car",class:t.shopCar.length?"active":""},[n("elm-icon",{ref:"car",attrs:{name:"car",color:t.shopCar.length?"#fff":"#999","font-size":46}}),t._v(" "),n("elm-badge",{directives:[{name:"show",rawName:"v-show",value:t.count,expression:"count"}],attrs:{value:t.count}})],1),t._v(" "),n("div",{staticClass:"content"},[t.shopCar.length?n("p",[n("span",{staticClass:"price"},[t._v(t._s(t.price))]),t._v(" "),n("span",{staticClass:"origin-price"},[t._v(t._s(t.originPrice))])]):n("p",{staticClass:"tip"},[t._v("未选购商品")]),t._v(" "),n("p",{staticClass:"delivery-fee"},[t._v(t._s(t.restaurant.floatDeliveryFee?"另需配送费¥"+t.restaurant.floatDeliveryFee:"免费配送"))])]),t._v(" "),n("div",{staticClass:"btn",class:t.price>=t.restaurant.floatMinimumOrderAmount?"active":"",on:{click:function(e){return e.stopPropagation(),t.pay(e)}}},[t._v(t._s(t.desc))])])],1)}),[],!1,null,"005f3f4d",null));e.a=A.exports},448:function(t,e,n){"use strict";var a=n(416);n.n(a).a},461:function(t,e,n){"use strict";n.r(e);var a=n(18),o=n.n(a),s=n(31),i=n.n(s),r=n(13),c=n.n(r),l=n(3),u=n.n(l),f=n(9),p=n.n(f),v=n(4),d=n.n(v),h=n(14),m=n.n(h),_=n(17),g=n.n(_),C=n(5),b=n.n(C),w=n(15),y=n(125),x=n(26),O=n(29),$=n(43),j=n(39),k=n.n(j),B=n(56),F=n(385),P=n(421);function S(t,e){var n=g()(t);if(m.a){var a=m()(t);e&&(a=d()(a).call(a,(function(e){return p()(t,e).enumerable}))),n.push.apply(n,a)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n,a=null!=arguments[e]?arguments[e]:{};if(e%2)u()(n=S(Object(a),!0)).call(n,(function(e){b()(t,e,a[e])}));else if(c.a)i()(t,c()(a));else{var s;u()(s=S(Object(a))).call(s,(function(e){o()(t,e,p()(a,e))}))}}return t}var z={name:"Food",components:{ScrollView:B.a,CircleButton:F.a,ShopCar:P.a},mixins:[y.a],beforeRouteLeave:function(t,e,n){this[x.b]($.e.slideRight),n()},data:function(){return{paddingBottom:0}},computed:M({variable:function(){return k.a}},Object(w.mapState)("shop",{food:function(t){return t.food}})),mounted:function(){if(!this.food)return this.$notify({type:"primary",message:"暂时没有此商品信息"}),void this.$router.go(-1);this.paddingBottom=this.$refs["shop-car"].$el.offsetHeight,this.$refs.scroll.reset()},methods:M({back:function(){this.$router.go(-1)},decrease:function(t){this[O.c](t)},increase:function(t){this[O.d](t)}},Object(w.mapMutations)("shop",[O.d,O.c]))},A=(n(448),n(0)),N=Object(A.a)(z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"food-container",style:{paddingBottom:t.paddingBottom+"px"}},[n("header",{staticClass:"header"},[n("elm-icon",{attrs:{name:"arrow",color:t.variable.primaryTextColor,"font-size":44,rotate:-90,"stop-propagation":!0},on:{click:t.back}}),t._v(" "),n("p",{staticClass:"title"},[t._v("商品详情")])],1),t._v(" "),t.food?n("scroll-view",{ref:"scroll"},[n("div",{staticClass:"image",style:{backgroundImage:"url("+t.food.imagePath+")"}}),t._v(" "),n("div",{staticClass:"content"},[n("p",{staticClass:"food-name"},[t._v(t._s(t.food.name))]),t._v(" "),n("div",{staticClass:"extra"},[n("span",{staticClass:"sell"},[t._v("月售"+t._s(t.food.sell))]),t._v(" "),n("span",{staticClass:"rating"},[t._v("好评率"+t._s(t.food.rating)+"%")])]),t._v(" "),n("div",{staticClass:"tag"},[n("elm-tag",{attrs:{color:"#eb6551"}},[t._v(t._s(t.food.discountRate)+"折")])],1),t._v(" "),n("div",[n("span",{staticClass:"price"},[t._v(t._s(t.food.price))]),t._v(" "),n("span",{staticClass:"origin-price"},[t._v(t._s(t.food.originPrice))])]),t._v(" "),n("circle-button",{attrs:{value:t.food.count},on:{decrease:function(e){return t.decrease(t.food)},increase:function(e){return t.increase(t.food)}}})],1),t._v(" "),t.food.description?n("div",{staticClass:"block"},[n("p",{staticClass:"title"},[t._v("商品简介")]),t._v(" "),n("p",{staticClass:"desc"},[t._v(t._s(t.food.description))])]):t._e()]):t._e(),t._v(" "),t.food?n("shop-car",{ref:"shop-car"}):t._e()],1)}),[],!1,null,"4c0f2471",null);e.default=N.exports}}]);
//# sourceMappingURL=9.d40642.js.map