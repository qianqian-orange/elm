(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{392:function(t,e,i){var a=i(395);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i(21).default)("f7f58b20",a,!0,{})},393:function(t,e,i){var a=i(404);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i(21).default)("23bde49b",a,!0,{})},394:function(t,e,i){"use strict";var a=i(392);i.n(a).a},395:function(t,e,i){(e=i(20)(!1)).push([t.i,"[data-v-71d3cc0e]:export{baseFontSize:75;headerHeight:84;themeColor:#008cff;primaryTextColor:#222}.elm-header[data-v-71d3cc0e]{box-sizing:border-box;position:fixed;top:0;left:0;z-index:999;display:flex;align-items:center;width:100%;height:1.12rem;background-image:linear-gradient(90deg,#1db5ff,#008cff)}.elm-icon[data-v-71d3cc0e]{width:.96rem;height:.96rem;line-height:.96rem;text-align:center}",""]),t.exports=e},396:function(t,e,i){"use strict";var a={name:"ElmHeader",props:{to:{type:String,default:""},replace:{type:Boolean,default:!1}},methods:{jump:function(){this.$emit("jump"),this.to?this.replace?this.$router.replace(this.to):this.$router.push(this.to):this.$router.go(-1)}}},r=(i(394),i(0)),o=Object(r.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"elm-header"},[this._t("left",[e("elm-icon",{attrs:{name:"arrow","font-size":44,rotate:-90},on:{click:this.jump}})]),this._v(" "),this._t("default"),this._v(" "),this._t("right")],2)}),[],!1,null,"71d3cc0e",null);e.a=o.exports},397:function(t,e,i){"use strict";i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return c}));var a=i(398),r=i.n(a),o=i(24);function n(t,e){try{sessionStorage.setItem(t,r()(e))}catch(t){Object(o.i)({type:"danger",message:"数据异常"})}}function s(t){try{return JSON.parse(sessionStorage.getItem(t))}catch(t){return Object(o.i)({type:"danger",message:"数据异常"}),null}}function c(t){return sessionStorage.removeItem(t)}},398:function(t,e,i){t.exports=i(399)},399:function(t,e,i){var a=i(400);t.exports=a},400:function(t,e,i){i(401);var a=i(17);a.JSON||(a.JSON={stringify:JSON.stringify}),t.exports=function(t,e,i){return a.JSON.stringify.apply(null,arguments)}},401:function(t,e,i){var a=i(4),r=i(52),o=i(22),n=r("JSON","stringify"),s=/[\uD800-\uDFFF]/g,c=/^[\uD800-\uDBFF]$/,l=/^[\uDC00-\uDFFF]$/,u=function(t,e,i){var a=i.charAt(e-1),r=i.charAt(e+1);return c.test(t)&&!l.test(r)||l.test(t)&&!c.test(a)?"\\u"+t.charCodeAt(0).toString(16):t},d=o((function(){return'"\\udf06\\ud834"'!==n("\udf06\ud834")||'"\\udead"'!==n("\udead")}));n&&a({target:"JSON",stat:!0,forced:d},{stringify:function(t,e,i){var a=n.apply(null,arguments);return"string"==typeof a?a.replace(s,u):a}})},402:function(t,e,i){"use strict";var a=i(132),r=i(61),o=i(133),n=i(36),s={name:"ListScrollView",components:{ScrollView:r.a,ElmFinish:o.a},mixins:[a.a],props:{dataSource:{type:Array,default:function(){return[]}},probeType:{type:Number,default:0},interval:{type:Number,default:300},loading:{type:Boolean,default:!1},finish:{type:Boolean,default:!1}},data:function(){return{px2rem:n.a}},watch:{dataSource:function(){this.reset()},loading:function(){this.reset()}},mounted:function(){var t=this;this.$refs.scroll.on("scroll",(function(e){var i=e.y;t.parentHeight>=t.contentHeight||t.parentHeight+t.interval>=t.contentHeight+i&&!t.loading&&!t.finish&&t.$emit("loadmore")}))},methods:{scrollTo:function(t,e){var i=t.x,a=t.y;this.$refs.scroll.scrollTo({x:i,y:a},e)},getScroll:function(){return this.$refs.scroll}}},c=(i(403),i(0)),l=Object(c.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("scroll-view",{ref:"scroll",attrs:{"probe-type":t.probeType}},[i("div",{staticClass:"list-container",style:{minHeight:t.parentHeight+"px",paddingBottom:t.dataSource.length&&t.finish?""+t.px2rem(112):0}},[t._t("default"),t._v(" "),i("elm-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),t._v(" "),t.dataSource.length||t.loading?t._e():i("elm-empty"),t._v(" "),i("elm-finish",{directives:[{name:"show",rawName:"v-show",value:t.dataSource.length&&t.finish,expression:"dataSource.length && finish"}]})],2)])}),[],!1,null,"5be1a916",null);e.a=l.exports},403:function(t,e,i){"use strict";var a=i(393);i.n(a).a},404:function(t,e,i){(e=i(20)(!1)).push([t.i,"[data-v-5be1a916]:export{baseFontSize:75;headerHeight:84;themeColor:#008cff;primaryTextColor:#222}.list-container[data-v-5be1a916]{box-sizing:border-box;position:relative}.elm-finish[data-v-5be1a916]{position:absolute;right:0;bottom:0;left:0}",""]),t.exports=e},452:function(t,e,i){var a=i(505);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i(21).default)("132183d6",a,!0,{})},453:function(t,e,i){var a=i(507);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i(21).default)("6276bc1b",a,!0,{})},454:function(t,e,i){var a=i(509);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,i(21).default)("501ce210",a,!0,{})},459:function(t,e,i){"use strict";var a=i(12),r=i.n(a),o=i(16),n=i.n(o),s=i(7),c=i.n(s),l=i(1),u=i.n(l),d=i(6),f=i.n(d),h=i(5),m=i.n(h),g=i(8),p=i.n(g),v=i(10),b=i.n(v),y=i(37),x=i.n(y),w=i(2),C=i.n(w),_=i(9),S=i(26),$=i(50),k=i(402),O=i(137);function I(t,e){var i=b()(t);if(p.a){var a=p()(t);e&&(a=m()(a).call(a,(function(e){return f()(t,e).enumerable}))),i.push.apply(i,a)}return i}function j(t){for(var e=1;e<arguments.length;e++){var i,a=null!=arguments[e]?arguments[e]:{};if(e%2)u()(i=I(Object(a),!0)).call(i,(function(e){C()(t,e,a[e])}));else if(c.a)n()(t,c()(a));else{var o;u()(o=I(Object(a))).call(o,(function(e){r()(t,e,f()(a,e))}))}}return t}var z={name:"ShopList",components:{ListScrollView:k.a,ShopCard:O.a},props:{init:{type:Boolean,default:!0},extra:{type:Boolean,default:!1}},data:function(){return{loading:!1}},computed:j({},Object(_.mapState)("shop",{shopList:function(t){return t.shopList.data},finish:function(t){return t.shopList.finish}})),mounted:function(){this.init&&!this.shopList.length&&this.getData()},methods:j(j({hate:function(t){var e,i=x()(e=this.shopList).call(e,(function(e){return e.id===t}));-1!==i&&(this[S.d](i),this.$refs.list.reset())},getData:function(){var t=this;return this.loading=!0,this[$.c]().then((function(){t.loading=!1}))},expand:function(){this.$refs.list.reset()},search:function(){this[S.b](),this.getData()},computedHeight:function(){this.$refs.list.computedHeight()},reset:function(){this.$refs.list.reset()},getScroll:function(){return this.$refs.list.getScroll()}},Object(_.mapActions)("shop",[$.c])),Object(_.mapMutations)("shop",[S.i,S.b,S.d]))},T=i(0),A=Object(T.a)(z,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("list-scroll-view",{ref:"list",attrs:{"probe-type":1,"data-source":t.shopList,loading:t.loading,finish:t.finish},on:{loadmore:t.getData}},[i("ul",t._l(t.shopList,(function(e){return i("shop-card",{key:e.id,attrs:{shop:e,extra:t.extra},on:{expand:t.expand,hate:t.hate}})})),1)])}),[],!1,null,null,null);e.a=A.exports},504:function(t,e,i){"use strict";var a=i(452);i.n(a).a},505:function(t,e,i){(e=i(20)(!1)).push([t.i,'[data-v-05ee468c]:export{baseFontSize:75;headerHeight:84;themeColor:#008cff;primaryTextColor:#222}.outside-category[data-v-05ee468c]{display:flex;width:100%;height:.85333rem}.outside-category .scroll-wrapper[data-v-05ee468c]{overflow:hidden;flex:1;height:100%;white-space:nowrap}.outside-category .expand[data-v-05ee468c]{width:.85333rem;height:.85333rem;line-height:.85333rem;text-align:center}.outside-category .outside-category-list[data-v-05ee468c]{display:flex;flex-wrap:nowrap;height:100%}.outside-category .outside-category-list .outside-category-item[data-v-05ee468c]{position:relative;flex-shrink:0;height:100%;padding:0 .26667rem;color:#999;font-size:.37333rem;line-height:.85333rem;text-align:center}.outside-category .outside-category-list .outside-category-item.active[data-v-05ee468c]{color:#222;font-weight:700}.outside-category .outside-category-list .outside-category-item.active[data-v-05ee468c]:after{content:"";position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:.64rem;height:.10667rem;background-color:#008cff;border-radius:.16rem}',""]),t.exports=e},506:function(t,e,i){"use strict";var a=i(453);i.n(a).a},507:function(t,e,i){(e=i(20)(!1)).push([t.i,'[data-v-16df5642]:export{baseFontSize:75;headerHeight:84;themeColor:#008cff;primaryTextColor:#222}.inside-category[data-v-16df5642]{position:absolute;top:1.12rem;right:0;bottom:0;left:0;background-color:rgba(0,0,0,.3)}.tip[data-v-16df5642]{padding:0 .4rem;color:#222;font-size:.37333rem;font-weight:700;background-color:#fafafa}.elm-icon[data-v-16df5642],.tip[data-v-16df5642]{line-height:1.06667rem}.elm-icon[data-v-16df5642]{position:absolute;top:0;right:.4rem}.category-container[data-v-16df5642]{overflow:hidden;height:10.66667rem}.category-container .main-category[data-v-16df5642]{float:left;width:3.46667rem;height:100%;background-color:#fafafa}.category-container .sub-category[data-v-16df5642]{overflow:hidden;height:100%;padding:0 .4rem 0 .56rem;background-color:#fff}.name[data-v-16df5642]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1;font-size:.37333rem;line-height:1.28rem}.count[data-v-16df5642]{min-width:.64rem;padding:.05333rem;border:1px solid #ccc;font-size:.26667rem;text-align:center;border-radius:.21333rem}.main-category-item[data-v-16df5642]{position:relative;display:flex;align-items:center;height:1.28rem;padding-right:.26667rem;padding-left:.53333rem;color:#999}.main-category-item.active[data-v-16df5642]{background-color:#fff}.main-category-item.active[data-v-16df5642]:before{content:"";position:absolute;top:50%;left:0;transform:translateY(-50%);width:.10667rem;height:.74667rem;background-color:#008cff}.sub-category-item[data-v-16df5642]{display:flex;align-items:center;height:1.28rem}.sub-category-item.active .name[data-v-16df5642]{color:#008cff}.sub-category-item img[data-v-16df5642]{width:.98667rem;height:.98667rem;margin-right:.34667rem;-o-object-fit:cover;object-fit:cover}',""]),t.exports=e},508:function(t,e,i){"use strict";var a=i(454);i.n(a).a},509:function(t,e,i){(e=i(20)(!1)).push([t.i,"[data-v-7e629826]:export{baseFontSize:75;headerHeight:84;themeColor:#008cff;primaryTextColor:#222}.kind-container[data-v-7e629826]{box-sizing:border-box;position:relative;display:flex;flex-direction:column;width:100%;height:100%;padding-top:1.12rem}.search-container[data-v-7e629826]{box-sizing:border-box;overflow:hidden;flex:1;height:.8rem;margin-right:.26667rem;background-color:#fff;border-radius:.64rem}.placeholder[data-v-7e629826]{position:relative;padding:0 .8rem;color:#999;font-size:.37333rem;line-height:.8rem}.placeholder .icon[data-v-7e629826]{position:absolute;top:50%;left:.21333rem;transform:translateY(-50%)}.scroll-wrapper[data-v-7e629826]{overflow:hidden;flex:1;padding:0 .4rem}",""]),t.exports=e},512:function(t,e,i){"use strict";i.r(e);var a=i(12),r=i.n(a),o=i(16),n=i.n(o),s=i(7),c=i.n(s),l=i(1),u=i.n(l),d=i(6),f=i.n(d),h=i(8),m=i.n(h),g=i(10),p=i.n(g),v=i(5),b=i.n(v),y=i(27),x=i.n(y),w=i(2),C=i.n(w),_=i(25),S=i.n(_),$=i(9),k=i(39),O=i(131),I=i(23),j=i(34),z=i(26),T=i(11),A=i(397),F=i(396),E=i(55),H=i.n(E),L=i(44),D=i.n(L),N=i(61),J={name:"OutsideCategory",components:{ScrollView:N.a},props:{dataSource:{type:Array,default:function(){return[]}}},data:function(){return{activeId:-1}},computed:{variable:function(){return D.a}},watch:{dataSource:function(t){this.activeId=t[0].id,this.$refs.scroll.reset()}},methods:{search:function(t){this.activeId=t,this.$emit("search")},expand:function(){this.$emit("expand")},scrollToElement:function(t){var e;this.activeId=t;var i=H()(e=this.$refs.item).call(e,(function(e){return+e.dataset.id===t}));this.$refs.scroll.scrollToElement(i)}}},B=(i(504),i(0)),P=Object(B.a)(J,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"outside-category"},[i("div",{staticClass:"scroll-wrapper"},[i("scroll-view",{ref:"scroll",attrs:{"scroll-x":!0,"scroll-y":!1}},[i("ul",{staticClass:"outside-category-list"},t._l(t.dataSource,(function(e){var a=e.id,r=e.name;return i("li",{key:a,ref:"item",refInFor:!0,staticClass:"outside-category-item",class:a===t.activeId?"active":"",attrs:{"data-id":a},on:{click:function(e){return e.stopPropagation(),t.search(a)}}},[t._v(t._s(r))])})),0)])],1),t._v(" "),i("span",{staticClass:"expand",on:{click:function(e){return e.stopPropagation(),t.expand(e)}}},[i("elm-icon",{attrs:{name:"arrow",color:t.variable.themeColor,"font-size":36,rotate:180}})],1)])}),[],!1,null,"05ee468c",null).exports,V=i(37),M=i.n(V),R={name:"InsideCategory",components:{ScrollView:N.a},props:{dataSource:{type:Array,default:function(){return[]}},visible:{type:Boolean,required:!0}},data:function(){return{mainActiveId:-1,subActiveId:-1}},computed:{subCategory:function(){var t,e=this;return-1===this.mainActiveId?[]:H()(t=this.dataSource).call(t,(function(t){return t.id===e.mainActiveId})).subs}},watch:{subCategory:function(){this.$refs["sub-scroll"].scrollTo({y:0}),this.$refs["sub-scroll"].reset()},visible:function(t){var e=this;t&&this.$nextTick((function(){e.scrollToElement()}))}},created:function(){var t=this.$watch("visible",(function(e){this.$refs["main-scroll"].reset(),this.$refs["sub-scroll"].reset(),t()})),e=this.$watch("dataSource",(function(t){this.mainActiveId=t[0].id,this.subActiveId=this.dataSource[0].subs[0].id,e()}))},methods:{close:function(){this.$emit("toggle")},selectMainCategory:function(t){this.mainActiveId=t},selectSubCategory:function(t){this.subActiveId=t,this.$emit("toggle"),this.$emit("search",{id:t,subCategory:this.subCategory})},scrollToElement:function(){var t,e,i=this,a=M()(t=this.dataSource).call(t,(function(t){return t.id===i.mainActiveId}));this.$refs["main-scroll"].scrollToElement(this.$refs["main-category-item"][a]),-1!==(a=M()(e=this.dataSource[a].subs).call(e,(function(t){return t.id===i.subActiveId})))&&this.$refs["sub-scroll"].scrollToElement(this.$refs["sub-category-item"][a])}}},Y=(i(506),Object(B.a)(R,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"inside-category",on:{click:function(e){return e.stopPropagation(),e.target!==e.currentTarget?null:t.close(e)}}},[i("p",{staticClass:"tip"},[t._v("请选择分类")]),t._v(" "),i("div",{staticClass:"category-container"},[i("div",{staticClass:"main-category"},[i("scroll-view",{ref:"main-scroll"},[i("ul",t._l(t.dataSource,(function(e){var a=e.id,r=e.name,o=e.count;return i("li",{key:a,ref:"main-category-item",refInFor:!0,staticClass:"main-category-item",class:a===t.mainActiveId?"active":"",on:{click:function(e){return e.stopPropagation(),t.selectMainCategory(a)}}},[i("span",{staticClass:"name"},[t._v(t._s(r))]),t._v(" "),i("span",{staticClass:"count"},[t._v(t._s(o))])])})),0)])],1),t._v(" "),i("div",{staticClass:"sub-category"},[i("scroll-view",{ref:"sub-scroll"},[i("ul",t._l(t.subCategory,(function(e){var a=e.id,r=e.name,o=e.count,n=e.imagePath;return i("li",{key:a,ref:"sub-category-item",refInFor:!0,staticClass:"sub-category-item",class:a===t.subActiveId?"active":"",on:{click:function(e){return e.stopPropagation(),t.selectSubCategory(a)}}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:n,expression:"imagePath"}],attrs:{alt:"category"}}),t._v(" "),i("span",{staticClass:"name"},[t._v(t._s(r))]),t._v(" "),i("span",{staticClass:"count"},[t._v(t._s(o))])])})),0)])],1)]),t._v(" "),i("elm-icon",{attrs:{name:"clear",color:"#999","font-size":42},on:{click:t.close}})],1)}),[],!1,null,"16df5642",null).exports),q=i(136),K=i(459);function X(t,e){var i=p()(t);if(m.a){var a=m()(t);e&&(a=b()(a).call(a,(function(e){return f()(t,e).enumerable}))),i.push.apply(i,a)}return i}var G={name:"Kind",title:"饿了么分类",meta:{keyword:"elm, kind",description:"这是饿了么分类页面，在这里你可以找到你想要吃的食物"},components:{ElmHeader:F.a,OutsideCategory:P,InsideCategory:Y,SortFilter:q.a,ShopList:K.a},mixins:[O.a],beforeRouteLeave:function(t,e,i){var a=k.a.home,r=k.a.shopSearch,o=k.a.shopOrder;switch(t.name){case a.name:this[z.b](),this[j.b](I.f.slideRight);break;case r.name:this[z.b](),this[j.b](I.f.slideLeft);break;case o.name:e.meta.scrollHeight=this.$refs.list.getScroll().getCurrent().y,this[j.b](I.f.slideLeft)}i()},beforeRouteEnter:function(t,e,i){i((function(i){var a=k.a.shopOrder,r=k.a.shopComment,o=k.a.shopDetail,n=t.meta.scrollHeight;switch(e.name){case a.name:case r.name:case o.name:i.$refs.list.getScroll().scrollTo({y:n})}}))},data:function(){return{category:{outside:[],inside:[]},visible:!1}},mounted:function(){Object(A.b)(I.e.category),this.getData()},methods:function(t){for(var e=1;e<arguments.length;e++){var i,a=null!=arguments[e]?arguments[e]:{};if(e%2)u()(i=X(Object(a),!0)).call(i,(function(e){C()(t,e,a[e])}));else if(c.a)n()(t,c()(a));else{var o;u()(o=X(Object(a))).call(o,(function(e){r()(t,e,f()(a,e))}))}}return t}({getData:function(){var t=this;S.a.get("/api/kind/category",{params:{id:+this.$route.params.id}}).then((function(e){var i=e.data;if(0===i.code){var a=i.data,r=a.outside,o=a.inside;t.category.outside=x()(r).call(r,(function(t){return{id:t.id,name:t.name}}));for(var n=function(e){var i,a=o[e],r=b()(i=a.sub_categories).call(i,(function(t){return t.image_url}));if(0===r.length)return"continue";t.category.inside.push({id:a.id,name:a.name,count:a.count,subs:x()(r).call(r,(function(t){return{id:t.id,name:t.name,count:t.count,imagePath:Object(T.d)(t.image_url,a.name,t.name)}}))})},s=1;s<o.length;s+=1)n(s)}else t.$notify({type:"danger",message:"获取数据失败"})}))},search:function(t){var e=this;t&&(this.category.outside=t.subCategory,this.$nextTick((function(){e.$refs["outside-category"].scrollToElement(t.id)}))),this.$refs.list.search()},toggle:function(){this.visible=!this.visible}},Object($.mapMutations)("shop",[z.b]))},Q=(i(508),Object(B.a)(G,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"kind-container"},[i("elm-header",{attrs:{to:"/home"}},[i("div",{staticClass:"search-container"},[i("router-link",{attrs:{to:"/shop/search?from="+t.$route.path}},[i("p",{staticClass:"placeholder"},[i("span",{staticClass:"icon"},[i("elm-icon",{attrs:{name:"search",color:"#999","font-size":36}})],1),t._v("搜索商家、商品名称")])])],1)]),t._v(" "),i("outside-category",{ref:"outside-category",attrs:{"data-source":t.category.outside},on:{search:t.search,expand:t.toggle}}),t._v(" "),i("sort-filter",{on:{search:t.search}}),t._v(" "),i("div",{staticClass:"scroll-wrapper"},[i("shop-list",{ref:"list"})],1),t._v(" "),i("inside-category",{attrs:{visible:t.visible,"data-source":t.category.inside},on:{toggle:t.toggle,search:t.search}})],1)}),[],!1,null,"7e629826",null));e.default=Q.exports}}]);
//# sourceMappingURL=7.ed9635.js.map